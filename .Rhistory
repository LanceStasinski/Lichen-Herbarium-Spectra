data = read.csv("metadata/taxonomy.csv", stringsAsFactors = F)
sum(unique(data$Species))
count(unique(data$Species))
species = unique(data$Species)
length(species)
length(unique(data$Family))
length(unique(data$Order))
length(unique(data$Class))
spec = read.csv("metadata/spectra_metadata.csv", stringsAsFactors = F)
spec = read.csv("metadata/spectra_metadata.csv", stringsAsFactors = F)
View(spec)
spec = spec[!spec$File.Name == NA,]
spec = read.csv("metadata/spectra_metadata.csv", stringsAsFactors = F)
spec = spec[!spec$File.Name == "",]
spec = spec[!spec$File.Name == "No Data",]
View(spec)
spec = spec[!spec[13,]]
spec = spec[-13,]
length(unique(spec$File.Name))
head(spec)
spec = spec[!spec$year == NA,]
View(spec)
spec = read.csv("metadata/spectra_metadata.csv", stringsAsFactors = F)
spec = spec[!spec$File.Name == "",]
min(spec$year)
max(spec$year)
s = spec[!is.na(spec$year),]
min(s$year)
max(s$year)
?aggregate
x = aggregate(s, by = unique(s$scientificName), FUN = length(unique(s$File.Name)))
x = aggregate(s, by = unique(s$scientificName), FUN = length)
x = aggregate(s, by = s$scientificName, FUN = length)
x = aggregate(s, by = scientificName, FUN = length)
t = table(s$scientificName)
t
df = as.data.frame(t)
df
df2 = df[df$Freq >= 5, ]
df2
ncol(df2)
nrow(df2)
max(df2$Freq)
unique(s[s$scientificName == "Flavoparmelia caperata",]$year)
unique(s[s$scientificName == "Lecidea tessellata",]$year)
unique(s[s$scientificName == "Flavoparmelia baltimorensis",]$year)
unique(s[s$scientificName == "Flavopunctelia praesignis",]$year)
df = read.csv("metadata/spec_metadata.csv", stringsAsFactors = F)
df = read.csv("metadata/spectra_metadata.csv", stringsAsFactors = F)
df = df[!df$File.Name == "",]
df = df[!is.na(df$year),]
View(df)
df = df[-13,]
View(df)
df = df[!df$Quality == "BAD",]
df = df[!df$Quality == "not great",]
2012 - 1886
2016-1886
130/5
130/6
130/7
130/8
130/9
if (2016 - df$year >= 26) {
df$period = 1
}
View(df)
4*26
if (2016 - df$year <= 26) {
df$period = 1
}
if (2016 - df$year > 104) {
df$period = 5
}
if (2016 - df$year <= 26) {
df$period = 1
}
else {
df$period = 2
}
if (2016 - df$year <= 26) {
df$period = 1
} else if {
df$period = 2
}
################################################################################
#create time classes
################################################################################
df["period"] <- NA
View(df)
df = read.csv("metadata/spectra_metadata.csv", stringsAsFactors = F)
df = df[!df$File.Name == "",]
df = df[!is.na(df$year),]
df = df[-13,]
df = df[!df$Quality == "BAD",]
df = df[!df$Quality == "not great",]
################################################################################
#create time classes
################################################################################
df["period"] <- NA
View(df)
if (2016 - df$year <= 26) {
df$period = 1
} else {
df$period = 2
}
df = read.csv("metadata/spectra_metadata.csv", stringsAsFactors = F)
df = df[!df$File.Name == "",]
df = df[!is.na(df$year),]
df = df[-13,]
df = df[!df$Quality == "BAD",]
df = df[!df$Quality == "not great",]
################################################################################
#create time classes
################################################################################
df["period"] <- NA
df$period[2016 - df$year <= 26] = 1
View(df)
df$period[2016 - df$year > 26 & 2016 - df$year <= 52] = 2
26*3
26*4
2016-1886
View(df)
df = read.csv("metadata/spectra_metadata.csv", stringsAsFactors = F)
df = df[!df$File.Name == "",]
df = df[!is.na(df$year),]
df = df[-13,]
df = df[!df$Quality == "BAD",]
df = df[!df$Quality == "not great",]
################################################################################
#create time classes
################################################################################
df["period"] <- NA
df$period[2016 - df$year <= 26] = 1
df$period[2016 - df$year > 26 & 2016 - df$year <= 52] = 2
df$period[2016 - df$year > 52 & 2016 - df$year <= 78] = 3
df$period[2016 - df$year > 78 & 2016 - df$year <= 104] = 4
df$period[2016 - df$year > 104] = 5
View(df)
table(df$period)
2016 - 78
1938-26
2012 - 1886
126/4
126/5
25.2*3
25.2*4
31.5*4
31.5*3
df = read.csv("metadata/spectra_metadata.csv", stringsAsFactors = F)
df = df[!df$File.Name == "",]
df = df[!is.na(df$year),]
df = df[-13,]
df = df[!df$Quality == "BAD",]
df = df[!df$Quality == "not great",]
################################################################################
#create time classes
################################################################################
#5 time classes over 130 years
df["period1"] <- NA
df$period1[2016 - df$year <= 25.2] = 1
df$period1[2016 - df$year > 25.2 & 2016 - df$year <= 50.4] = 2
df$period1[2016 - df$year > 50.4 & 2016 - df$year <= 75.6] = 3
df$period1[2016 - df$year > 75.6 & 2016 - df$year <= 100.8] = 4
df$period1[2016 - df$year > 100.8] = 5
table(df$period1)
#4 time classes over 130 years
df["period2"] <- NA
df$period2[2016 - df$year <= 31.5] = 1
df$period2[2016 - df$year > 31.5 & 2016 - df$year <= 63] = 2
df$period2[2016 - df$year > 63 & 2016 - df$year <= 94.5] = 3
df$period2[2016 - df$year > 94.5] = 4
table(df$period2)
x = 126/6
2x
2*x
#6 time classes over 126 years
df["period1"] <- NA
x = 126/6
df$period1[2012 - df$year <= x] = 1
df$period1[2012 - df$year > x & 2012 - df$year <= 2*x] = 2
df$period1[2012 - df$year > 2*x & 2012 - df$year <= 3*x] = 3
df$period1[2012 - df$year > 3*x & 2012 - df$year <= 4*x] = 4
df$period1[2012 - df$year > 4*x & 2012 - df$year <= 5*x] = 5
df$period1[2012 - df$year > 5*x] = 6
table(df$period1)
classify_time = function(dataframe, time_name, n_classes, time_span, start_year){
dataframe[time_name] = NA
x = time_span/n_classes
for (i in n_classes){
if (i = 1){
dataframe$time_name[start_year - dataframe$year <= x] = i
}
else {
dataframe$time_name[start_year - dataframe$year > (i-1)*x &
start_year - dataframe$year <= i*x] = i
}
}
}
classify_time = function(dataframe, time_name, n_classes, time_span, start_year){
dataframe[time_name] = NA
x = time_span/n_classes
for (i in 1:n_classes){
if (i = 1){
dataframe$time_name[start_year - dataframe$year <= x] = i
}
else {
dataframe$time_name[start_year - dataframe$year > (i-1)*x &
start_year - dataframe$year <= i*x] = i
}
}
}
classify_time = function(dataframe, time_name, n_classes, time_span, start_year){
dataframe[time_name] = NA
x = time_span/n_classes
for (i in 1:n_classes){
if (i == 1){
dataframe$time_name[start_year - dataframe$year <= x] = i
}
else {
dataframe$time_name[start_year - dataframe$year > (i-1)*x &
start_year - dataframe$year <= i*x] = i
}
}
}
classify_time(dataframe = df, time_name = "period1", n_classes = 5, time_span = 126, start_year = 2012)
df["period3"] <- NA
df[period3][2012 - df$year <= 10] = 1
df = read.csv("metadata/spectra_metadata.csv", stringsAsFactors = F)
df = df[!df$File.Name == "",]
df = df[!is.na(df$year),]
df = df[-13,]
df = df[!df$Quality == "BAD",]
df = df[!df$Quality == "not great",]
df["period3"] <- NA
df[period3][2012 - df$year <= 10] = 1
df$period3[2012 - df$year <= 10] = 1
classify_time = function(dataframe, time_name, n_classes, time_span, start_year){
dataframe[time_name] = NA
x = time_span/n_classes
for (i in 1:n_classes){
if (i == 1){
dataframe$time_name[start_year - dataframe$year <= x] = i
}
else {
dataframe$time_name[start_year - dataframe$year > (i-1)*x &
start_year - dataframe$year <= i*x] = i
}
}
}
classify_time(dataframe = df, time_name = "period1", n_classes = 5, time_span = 126, start_year = 2012)
View(df)
################################################################################
df = read.csv("metadata/spectra_metadata.csv", stringsAsFactors = F)
df = df[!df$File.Name == "",]
df = df[!is.na(df$year),]
df = df[-13,]
df = df[!df$Quality == "BAD",]
df = df[!df$Quality == "not great",]
classify_time = function(dataframe, time_name, n_classes, time_span, start_year){
dataframe[time_name] = NA
x = time_span/n_classes
for (i in 1:n_classes){
if (i == 1){
dataframe$time_name[start_year - dataframe$year <= x] = i
}
else if (i > 1) {
dataframe$time_name[start_year - dataframe$year > (i-1)*x &
start_year - dataframe$year <= i*x] = i
}
}
}
classify_time(dataframe = df, time_name = "period1", n_classes = 5, time_span = 126, start_year = 2012)
View(df)
View(df)
